/*********************************************************************************/
/********** THIS FILE IS GENERATED BY TOUCHGFX DESIGNER, DO NOT MODIFY ***********/
/*********************************************************************************/
#include <gui_generated/openscreen_screen/OpenScreenViewBase.hpp>
#include "BitmapDatabase.hpp"

OpenScreenViewBase::OpenScreenViewBase() :
    interaction2Counter(0),
    interaction1EndedCallback(this, &OpenScreenViewBase::interaction1EndedCallbackHandler)
{

    image1.setXY(0, 0);
    image1.setBitmap(touchgfx::Bitmap(BITMAP_DIGITALRED2_ID));

    scalableImage1.setBitmap(touchgfx::Bitmap(BITMAP_IMRLOGOWHITEBACKGROUND_ID));
    scalableImage1.setPosition(37, 79, 406, 115);
    scalableImage1.setScalingAlgorithm(touchgfx::ScalableImage::NEAREST_NEIGHBOR);
    scalableImage1.setAlpha(0);

    add(image1);
    add(scalableImage1);
}

void OpenScreenViewBase::setupScreen()
{

}

//Handles delays
void OpenScreenViewBase::handleTickEvent()
{
    if(interaction2Counter > 0)
    {
        interaction2Counter--;
        if(interaction2Counter == 0)
        {
            //Interaction3
            //When Interaction2 completed change screen to Screen1
            //Go to Screen1 with no screen transition
            application().gotoScreen1ScreenNoTransition();
        }
    }
}

//Called when the screen is done with transition/load
void OpenScreenViewBase::afterTransition()
{
    //Interaction1
    //When screen is entered fade scalableImage1
    //Fade scalableImage1 to alpha:175 with LinearIn easing in 1000 ms (60 Ticks)
    scalableImage1.clearFadeAnimationEndedAction();
    scalableImage1.startFadeAnimation(175, 60, touchgfx::EasingEquations::linearEaseIn);
    scalableImage1.setFadeAnimationEndedAction(interaction1EndedCallback);
}

void OpenScreenViewBase::interaction1EndedCallbackHandler(const touchgfx::FadeAnimator<touchgfx::ScalableImage>& comp)
{
    //Interaction2
    //When Interaction1 completed delay
    //Delay for 500 ms (30 Ticks)
    interaction2Counter = INTERACTION2_DURATION;
}
